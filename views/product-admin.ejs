<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Admin</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
      :root {
        --base-clr: #11121a;
        --line-clr: #42434a;
        --hover-clr: #222533;
        --text-clr: #e6e6ef;
        --accent-clr: #5e63ff;
        --secondary-text-clr: #b0b3c1;
      }

      * {
        margin: 0;
        padding: 0;
      }
      html {
        font-family: Poppins, "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.5rem;
      }
      body {
        min-height: 100vh;
        min-height: 100dvh;
        background-color: var(--base-clr);
        color: var(--text-clr);
        display: grid;
        grid-template-columns: auto 1fr;
      }
      #sidebar {
        box-sizing: border-box;
        height: 100vh;
        width: 250px;
        padding: 5px 1em;
        background-color: var(--base-clr);
        border-right: 1px solid var(--line-clr);

        position: sticky;
        top: 0;
        align-self: start;
        transition: 300ms ease-in-out;
        overflow: hidden;
        text-wrap: nowrap;
      }
      #sidebar.close {
        padding: 5px;
        width: 60px;
      }
      #sidebar ul {
        list-style: none;
      }
      #sidebar > ul > li:first-child {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 16px;
        .logo {
          font-weight: 600;
        }
      }
      #sidebar ul li.active a {
        color: #007bff;

        svg {
          fill: #007bff;
        }
      }

      #sidebar a,
      #sidebar .dropdown-btn,
      #sidebar .logo {
        border-radius: 0.5em;
        padding: 0.85em;
        text-decoration: none;
        color: var(--text-clr);
        display: flex;
        align-items: center;
        gap: 1em;
      }
      .dropdown-btn {
        width: 100%;
        text-align: left;
        background: none;
        border: none;
        font: inherit;
        cursor: pointer;
      }
      #sidebar svg {
        flex-shrink: 0;
        fill: var(--text-clr);
      }
      #sidebar a span,
      #sidebar .dropdown-btn span {
        flex-grow: 1;
      }
      #sidebar a:hover,
      #sidebar .dropdown-btn:hover {
        background-color: var(--hover-clr);
      }
      #sidebar .sub-menu {
        display: grid;
        grid-template-rows: 0fr;
        transition: 300ms ease-in-out;

        > div {
          overflow: hidden;
        }
      }
      #sidebar .sub-menu.show {
        grid-template-rows: 1fr;
      }
      .dropdown-btn svg {
        transition: 200ms ease;
      }
      .rotate svg:last-child {
        rotate: 180deg;
      }
      #sidebar .sub-menu a {
        padding-left: 2em;
      }
      #toggle-btn {
        margin-left: auto;
        padding: 1em;
        border: none;
        border-radius: 0.5em;
        background: none;
        cursor: pointer;

        svg {
          transition: rotate 150ms ease;
        }
      }
      #toggle-btn:hover {
        background-color: var(--hover-clr);
      }
.custom-logout-btn span{
  color: red;
}

.custom-logout-btn:active {
  color: #e63946; 
  transform: scale(0.96); 
}

      /* css for dashboard============================================================================ */
      #dashboard {
        padding: 20px;
        background-color: var(--base-clr);
      }

      .dashboard-container {
        display: grid;
        grid-template-columns: repeat(4, 1fr); /* 4 blocks in a row */
        gap: 20px;
      }

      .dashboard-block {
        background-color: #2c2f3d;
        border-radius: 0.5em;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        color: var(--text-clr);
        text-align: left;
      }

      .dashboard-value {
        font-size: 2em;
        font-weight: bold;
      }

      .dashboard-text {
        font-size: 1em;
        color: var(--secondary-text-clr);
      }

      /* end css for dahsboar========================================================================= */

      /* css for order-list ========================================================================== */
      .tm-block {
        background-color: var(--base-clr);
        border-radius: 0.5em;
        padding: 1.5em;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      }

      .tm-block-title {
        color: #007bff;
        font-size: 1.5em;
        margin-bottom: 1em;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
      }
      /* .table::-webkit-scrollbar {
        display: none;
      } */

      .table th,
      .table td {
        padding: 1em;
        text-align: left;
        border-bottom: 1px solid #3a3c46;
        color: var(--text-clr);
      }

      .table thead {
        background-color: var(--table-header-bg);
      }

      /* .table th {
  color: var(--accent-clr);
} */
      .tm-status-circle {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 10px;
      }

      .tm-status-circle.confirmed {
        background-color: #5efffc;
      }
      .tm-status-circle.processing {
        background-color: #1a4cb7;
      }


      .tm-status-circle.delivered {
        background-color: #18df26;
      }

      .tm-status-circle.cancelled {
        background-color: #e74c3c;
      }

      /* Scrollable Box for Orders */
      .tm-block-scroll {
        /* max-height: 400px; */
        /* overflow-y: auto; Enables vertical scrolling */
        padding-right: 1em;
        margin-top: 20px;

        /* Hides the scrollbar */
        scrollbar-width: none;
      }

      .tm-block-scroll::-webkit-scrollbar {
        display: none; 
      }

      /* css for invoice page */
      .print-btn{
        background-color: #007bff;
    color: white;
    border: none;
    padding: 3px 8px;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 13px;
      }
   
      .invoice-page {
  padding: 15px;
}

.back-container {
  text-align: left;
}

.back-to-orderlist {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 5px 15px;
  font-size: 14px; 
  cursor: pointer;
  border-radius: 5px;
  position: relative;
  margin-bottom: -20px;
  left: 20px;
}

.invoice-container {
  background: white;
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  max-width: 350px;
  margin: 0 auto;
  line-height: none;
}

.delivery-address .address-box{
  margin: 5px 0;
  font-size: 10px; 
  line-height: 1.5;
  color: #11121a;
}
.top-details .COD{
  background-color: #eee;
  padding: 1px 3px;
  font-size: 12px;
  color: #11121a;
}
.address-qr-section {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 20px; 
}

.qr-code img {
  width: 150px; 
  height: auto;
}
.courier-details {
  background-color: #eee;
  border-bottom: 1px solid #6666;
  border-top: 1px solid #6666;
  padding: 0px 2px;
}

.courier-row {
  display: flex;
  justify-content: space-between; 
}

.courier-row p {
  margin: 0; 
  font-size: 12px;
  color: #11121a;
}
.soldby{
  border-bottom: 1px solid #6666;
  padding: 2px 0px;
}
.soldby p{
  font-size: 10px;
  color: #000; 
}
.gstin{
  border-bottom: 1px solid #6666;
  padding: 2px 0px;
}
.gstin p{
  font-size: 12px;
  color: #000;
}
.product-details {
  margin-top: 5px;
}

.product-table {
  width: 100%; 
  border-collapse: collapse; 
  text-align: left;
}

.product-table th,
.product-table td {
  border: 1px solid #6666; 
  padding: 0px 2px; 
  font-size: 10px;
  color: #000;
}

.product-table th {
  background-color: #f4f4f4; 
  font-weight: bold; 
}

.product-table tfoot td {
  font-weight: bold; 
  background-color: #f9f9f9; 
}

.ids p {
  font-size: 12px; 
  margin: 5px 0;
  color: #11121a;
}

.ids img {
  display: block;
  margin: 10px 0;
  width: 150px;
  height: auto;
}
.ordered{
  text-align: right;
  border-top: 1px solid #6666;
  border-bottom: 1px solid #6666;
}
.ordered p{
  font-size: 10px;
  color: #000;
}
.ordered img{
  width: 50px;
}
@media (max-width: 768px) {
  .invoice-container{
    margin-top: 50px;
  }
}
/*end css for order list ============================================================== */

   

      /* start css for account page<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> */
      .container-block {
        margin: auto;
        padding: 30px;
      }
      .add-account-btn {
        width: 20%;
      padding: 5px 10px;
      font-size: 16px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      margin-bottom: 20px;
      display: inline-block;
    }
    .account-form {
        display: flex;
        gap: 20px;
      }
      .account-form{
        /* background-color: #42434a; */
        box-shadow: 0 4px 8px rgba(255, 255, 255, 0.6); 
        /* box-shadow: 0 4px 8px rgba(128, 128, 128, 0.3); */
       }
       .account-form h4 {
  font-size: 18px; 
  font-weight: bold; 
  padding: 5px;
 
}
      .account-form > div {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      hr {
  border: none; 
  height: 2px; 
 
  margin: 20px 0; 
  border-radius: 5px; 
}
.image-column-left {
        flex: 1 1 30%;
        padding: 20px;
        border-radius: 10px;
        color: white;
      }
      .form-column-right {
        flex: 1 1 65%;
        padding: 20px;
        border-radius: 10px;
        color: white;
      }
      .form-details {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
      }

      .form-group-details {
        flex: 1 1 calc(50% - 10px);
      }

      .form-group-details label {
        font-weight: 600;
        margin-bottom: 8px;
        display: block;
      }

      .form-group-details input {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
      }

      .form-group-details input:focus {
        border-color: #0056b3;
        outline: none;
      }

/* Action Buttons Layout */
.action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .action-buttons button {
      padding: 8px 12px;
      font-size: 15px;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      width: 120px; 
    }

    .action-buttons .update-btn {
      background-color: #007bff;
      color: white;
    }
    .update-btn:hover{
      background-color: #0056b3;
    }
    .delete-btn {
      background-color: rgb(209, 18, 18);
      color: white;
    }
    .delete-btn:hover{
      background-color: #972316;
    }

    /* start css for main-account================================================================ */
    .container {
  margin: auto;
  padding: 10px 30px;
}

.block {
  background-color: #2c2c54;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  color: #fff;
}

.block-dark {
  background-color: #0056b3;
}

/* Headings */
.block-title {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 20px;
}

/* Select Input */
.custom-select-wide {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  border-radius: 5px;
  border: 1px solid #ccc;
  background-color: #fff;
  color: #000;
  margin-top: 10px;
}

/* Avatar Section */
.avatar-container {
  position: relative;
  text-align: center;
  margin-bottom: 10px;
}

.avatar-image {
  width: 300px;
  height: 250px;
  object-fit: cover;
}

.avatar-delete-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-size: 24px;
  display: none; /* Hidden by default */
}

.avatar-container:hover .avatar-delete-icon {
  display: block; /* Show delete icon on hover */
}

/* Buttons */
 .button-clicked, .btn-danger {
  font-size: 16px;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  text-transform: uppercase;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
  color: #fff;
}

#uploadBtn{
  display: none;
}
.button-upload {
  background-color: #0056b3; display: inline-block;
  text-transform: uppercase;
  color: #fff;
  text-align: center;
  padding: 5px 10px;
  cursor: pointer;
  border-radius: 5px;
}

.button-upload:hover,
.button-clicked:hover {
  background-color: #007bff;
}

.btn-danger {
  background-color: #e74c3c;
}

.btn-danger:hover {
  background-color: #c0392b;
}

/* Form Styles */
.form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.form-group {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 15px;
}

.form-group label {
  flex: 0 0 30%;
  font-weight: 600;
}

.form-group input,
.form-group select {
  flex: 1;
  padding: 10px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

.form-group input:focus,
.form-group select:focus {
  border-color: #0056b3;
  outline: none;
}

/* Layout Adjustments */
.account-row {
  display: flex;
  gap: 20px;
}

.block-column-left {
  flex: 1 1 30%;
  padding: 20px;
  border-radius: 10px;
  color: white;
}

.block-column-right {
  flex: 1 1 65%;
  padding: 20px;
  border-radius: 10px;
  color: white;
}


/* Responsive Design */
@media (max-width: 768px) {
  .form-group {
    flex-direction: column;
    align-items: flex-start;
  }

  .form-group label {
    flex: 0 0 auto;
    margin-bottom: 5px;
  }

  .account-row {
    flex-direction: column;
  }
}

.back-to-main {
  font-size: 20px; 
  color: #007bff; 
  cursor: pointer; 
  margin: 10px; 
  transition: transform 0.3s ease, color 0.3s ease; 
}

.back-to-main:hover {
  transform: scale(1.2);
  color: #0056b3; 
}

.back-to-main:active {
  transform: scale(1); 
  color: #003d80; 
}

      /* end style of account============================================================================ */

      /* start css for update account ========================================================================== */
      .update-container {
  margin: auto;
  padding: 10px 30px;
}

.update-block-dark {
  background-color: #0056b3;
}

/* Headings */
.block-title {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 20px;
}

/* Select Input */
.update-custom-select-wide {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  border-radius: 5px;
  border: 1px solid #ccc;
  background-color: #fff;
  color: #000;
  margin-top: 10px;
}

/* Avatar Section */
.update-avatar-container {
  position: relative;
  text-align: center;
  margin-bottom: 10px;
}

.avatar-image {
  width: 300px;
  height: 250px;
  object-fit: cover;
}

.avatar-delete-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-size: 24px;
  display: none; /* Hidden by default */
}

.avatar-container:hover .avatar-delete-icon {
  display: block; /* Show delete icon on hover */
}

/* Buttons */
 .button-clicked, .update-btn-danger {
  font-size: 16px;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  text-transform: uppercase;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
  color: #fff;
}

#uploadBtn{
  display: none;
}
.update-button-upload {
  background-color: #0056b3; display: inline-block;
  text-transform: uppercase;
  color: #fff;
  text-align: center;
  padding: 5px 10px;
  cursor: pointer;
  border-radius: 5px;
}

.update-button-upload:hover,
.button-clicked:hover {
  background-color: #007bff;
}

.update-btn-danger {
  background-color: #e74c3c;
}

.update-btn-danger:hover {
  background-color: #c0392b;
}

/* Form Styles */
.form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.update-form-group {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 15px;
}

.update-form-group label {
  flex: 0 0 30%;
  font-weight: 600;
}

.update-form-group input,
.update-form-group select {
  flex: 1;
  padding: 10px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

.update-form-group input:focus,
.update-form-group select:focus {
  border-color: #0056b3;
  outline: none;
}

/* Layout Adjustments */
.update-account-row {
  display: flex;
  gap: 20px;
}

.update-block-column-left {
  flex: 1 1 30%;
  padding: 20px;
  border-radius: 10px;
  color: white;
}

.update-block-column-right {
  flex: 1 1 65%;
  padding: 20px;
  border-radius: 10px;
  color: white;
}


/* Responsive Design */
@media (max-width: 768px) {
  .update-form-group {
    flex-direction: column;
    align-items: flex-start;
  }

  .update-form-group label {
    flex: 0 0 auto;
    margin-bottom: 5px;
  }

  .update-account-row {
    flex-direction: column;
  }
}

    /* media queries for all pages */
      @media (max-width: 768px) {

        /* for dashboard */
        .dashboard-container {
          grid-template-columns: none;
        }
        /* for order-list */
      
        .tm-block-scroll{
          padding: 0px;
        padding-top: 20px;
        margin: auto;
        overflow-y: auto;
        max-height: 85vh;
        overflow-x: auto;
        max-width: 295px;
        }
        /* for account */

        .add-account-btn{
          width: 50%;
        }
        .account-row {
          margin-bottom: 50px;
    flex-direction: column; 
  }
  .account-form{
    margin-bottom: 50px;
    flex-direction: column; 
  }
  .container-block{
    padding: 10px;
  }
  .button-clicked{
    font-size: 11px;
    padding: 14px 20px;
  }
  .form-group label{
    font-size: 15px;
  }

}
       /* media queries for sidebar=================================================================== */
      @media (max-width: 800px) {
        body {
          grid-template-columns: 1fr;
        }

        #sidebar {
          height: 60px;
          width: 100%;
          border-right: none;
          border-top: 1px solid var(--line-clr);
          padding: 0;
          position: fixed;
          z-index: 1;
          top: unset;
          bottom: 0;

          > ul {
            padding: 0;
            display: grid;
            grid-auto-columns: 50px;
            grid-auto-flow: column;
            justify-content: space-around;
            align-items: center;
            /* overflow-x: scroll;
      margin-left: 68px; */
          }
          ul li {
            height: 100%;
          }
          ul a,
          ul .dropdown-btn {
            width: 60px;
            height: 60px;
            padding: 0;
            border-radius: 0;
            justify-content: center;
          }

          ul li span,
          ul li:first-child,
          .dropdown-btn svg:last-child {
            display: none;
          }

          ul li .sub-menu.show {
            position: fixed;
            bottom: 60px;
            left: 0;
            box-sizing: border-box;
            height: 60px;
            width: 100%;
            background-color: var(--hover-clr);
            border-top: 1px solid var(--line-clr);
            display: flex;
            justify-content: center;

            > div {
              overflow-x: auto;
            }
            li {
              display: inline-flex;
            }
            a {
              box-sizing: border-box;
              padding: 8px;
              width: auto;
              justify-content: center;
            }
          }
        }
      }

      
      /* CSS for products ==============================================================================*/
      .toggle-button{
            padding: 10px 18px;
            border-radius: 5px;
            border: none;
            background-color: gray;
            color: white;
            cursor: pointer;
            transition: background-color 0.4s;
        }

        .toggle-button.active {
            background-color: #4caf50;
        }
    
.box-update-btn button{
      background-color: #007bff;
      color: white;
      border: none;
      padding: 3px 8px;
      border-radius: 5px;
      cursor: pointer;
    }
      .custom-table th,
      .custom-table td,
      .category-table th,
      .category-table td {
        padding: 12px;
        border-bottom: 1px solid #3a3c46;
      }

      .custom-table th {
        background-color: #007bff;
        font-weight: bold;
        color: #fff;
      }

     

      .custom-table,
      .category-table {
        /* border-radius: 5px; */
        overflow: hidden;
        background-color: #2c2f3d;
      }

      .product-left-block div::-webkit-scrollbar,
      .product-right-block div::-webkit-scrollbar {
        width: 8px;
      }

      .product-left-block div::-webkit-scrollbar-thumb,
      .product-right-block div::-webkit-scrollbar-thumb {
        background-color: #ccc;
        /* border-radius: 4px; */
      }

      .product-left-block div::-webkit-scrollbar-track,
      .product-right-block div::-webkit-scrollbar-track {
        background-color: #f1f1f1;
      }

      .delete-icon {
        position: relative;
        text-align: center;
        cursor: pointer;
      }

      .delete-icon i {
        background-color: #2c2f3d;
        color: white;
        border-radius: 50%;
        padding: 10px;
        font-size: 16px;
        transition: all 0.3s ease;
      }

      .delete-icon:hover i {
        background-color: #3a3c46;
        transform: scale(1.1);
        color: #ffffff;
      }
      
      .product-container {
        padding: 10px;
        display: flex;
        gap: 20px;
        max-height: 600px;
        margin-top: 20px;
      }

      .product-left-block,
      .product-right-block {
        display: flex;
        flex-direction: column;
        overflow-y: auto;
      }
      .product-left-block::-webkit-scrollbar,
.product-right-block::-webkit-scrollbar {
  width: 8px; 
}

.product-left-block::-webkit-scrollbar-track,
.product-right-block::-webkit-scrollbar-track {
  background: #f0f0f0; 
}

.product-left-block::-webkit-scrollbar-thumb,
.product-right-block::-webkit-scrollbar-thumb {
  background: #ccc; 
  border-radius: 10px; 
}

.product-left-block::-webkit-scrollbar-thumb:hover,
.product-right-block::-webkit-scrollbar-thumb:hover {
  background: #aaa; 
}
      .product-left-block {
        flex: 2;
      }
      .product-left{
        margin-bottom: 10px
      }
    
      .product-right-block {
        flex: 1;
      }

      .product-right-block h2 {
        text-align: center;
       
        background-color: #007bff;
        padding: 12px 0px;
      }

      table {
        border-collapse: collapse;
        width: 100%;
        text-align: center;
      }
      .product-btns {
  display: flex;
  justify-content: center; 
  gap: 15px; 
 
 
}

.product-btns button {
  width: 100%;
  padding: 12px 20px; 
  border: none; 
  background-color: #3498db; 
  color: #fff;
  font-size: 15px; 
  font-weight: bold; 
 cursor: pointer; 
}
.product-btns button:hover {
  background-color: #2c81ba; 
}
.add-category-btn {
    
        background-color: #007bff;
        color: white;
        border: none;
        padding: 12px 0;
        cursor: pointer;
        font-size: 14px;
        width: 100%;
        /* border-radius: 5px; */
      }

      /* media query for product */
      @media (max-width: 768px) {
       
  .product-container {
    max-width: 340px;
    max-height: 650px;
    flex-direction: column;
    gap: 10px;
    height: auto;
    padding: 10px;
    
  }
  .product-right-block{
    margin-top: 20px;
        height: 1100px;
    }
  .product-left-block,
  .product-right-block {
    flex: unset;
    margin-bottom: 20px; 
  }

  /* Table adjustments for scrolling */
  /* table {
    display: block;
    width: 100%;
    overflow-x: auto; 
    white-space: nowrap; 
    font-size: 12px; 
  } */

  .custom-table th,
  .custom-table td,
  .category-table th,
  .category-table td {
    padding: 8px;
  }

  button {
    font-size: 12px;
    padding: 10px 0;
  }
  .product-right-block h2 {
    font-size: 16px;
    padding: 10px;
  }
  .delete-icon i {
    padding: 8px;
    font-size: 14px;
  }

  /* Adjust scrollbar width */
  .product-left-block div::-webkit-scrollbar,
  .product-right-block div::-webkit-scrollbar {
    width: 6px; 
  }
}
/* css for add product form =============================================================================== */
#add-product-form {
  max-width: 900px;
  margin: auto;
  padding: 2rem;
  background-color: #2c2f3d;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(255, 253, 253, 0.1);
}
#update-product-form{
  max-width: 900px;
  margin: auto;
  padding: 2rem;
  background-color: #2c2f3d;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(255, 253, 253, 0.1);
}
.form-heading {
  /* text-align: center; */
  margin-bottom: 1.5rem;
  font-size: 20px;
  color: #fff;
}

.form-container {
  display: flex;
  gap: 1rem;
  justify-content: space-between;
  flex-wrap: wrap; 
}

.form-block {
  flex: 1;
  padding: 1rem;
  min-width: 300px; 
}

.left-form-block .form-group {
  margin-bottom: 1rem;
}

label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: bold;
}

input[type="text"],
input[type="number"],
input[type="date"],
select,
textarea {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 1rem;
  color: #888;
  box-sizing: border-box; 
}

textarea {
  resize: vertical; 
  height: 2.5rem; 
  line-height: 1.5; 
}

.form-row {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
}

.form-row .form-group {
  flex: 1;
}

.right-form-block .tm-product-img-dummy {
  width: 300px;
  height: 250px;
  background: #f0f0f0;
  border-radius: 8px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0 auto;
}

.tm-upload-icon {
  font-size: 3rem;
  color: #888;
  cursor: pointer;
}

.custom-file .btn {
 margin-top: 15px;
  width: 75%;
margin-left: 50px;
  padding: 0.6rem;
  background-color: #007bff;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.custom-file .btn:hover {
  background-color: #0056b3;
}

.form-actions {
  width: 100%;
  display: flex;
  justify-content: center;
  /* margin-top: 2rem; */
}

.btn-success {
  padding: 0.8rem 2rem;
  font-size: 1rem;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.btn-success:hover {
  background-color: #0056b3;
}
/* Style for the Back Icon */
.back-icon {
  cursor: pointer;
  font-size: 24px;
  color: #007bff;
  margin-right: 15px;
}

.back-icon:hover {
  color: #0056b3;
}
@media (max-width: 768px){
  #add-product-form {
  padding: 1rem;
  margin-bottom: 100px;
}
#update-product-form{
  padding: 1rem;
  margin-bottom: 50px;
}
.btn-success{
  margin-bottom: 60px;
}
}

/*css for  Category Form */

#add-category-form {
  max-width: 400px;
  margin: 50px auto;
  padding: 20px;
  background-color: #2c2f3d;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(255, 253, 253, 0.2);
}
.category-container {
  display: flex;
  flex-direction: column;
  align-items: flex-start; 
  width: 300px;
}
.icon-container {
  width: 100%;
  text-align: left; 
  margin-bottom: 10px;
}
.form-content label {
  font-size: 16px;
  font-weight: bold;
  color: #ffffff;
  display: block;
  margin-bottom: 8px;
}
.form-content input {
  width: 100%;
  padding: 12px;
  border: 2px solid #007bff;
  border-radius: 6px;
  font-size: 14px;
  background: #f9f9f9;
  outline: none;
  transition: border 0.3s;
}

.form-content input:focus {
  border-color: #0056b3;
  box-shadow: 0 0 6px rgba(0, 123, 255, 0.5);
}
.form-content button {
  width: 80px; 
  padding: 8px;
  background: #007bff;
  color: white;
  font-size: 14px; 
  font-weight: bold;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.3s ease-in-out;
  margin-top: 10px;
  text-align: center;
}

.form-content button:hover {
  background: #0056b3;
}

/* css for query page============================================================================== */
.query-box {
        width: 60%;
        margin: auto;
        padding: 10px;
        background: #f0f0f0;
        border-radius: 8px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
    }
    .query-heading {
        text-align: center;
        font-size: 18px;
        margin-bottom: 15px;
        color: #000;
    }
    .query-container {
        background: #fff;
        padding: 10px;
        margin-bottom: 15px;
        border-radius: 6px;
        box-shadow: 0 0 3px rgba(0, 0, 0, 0.1);
    }
    .query-title {
        background: #3498db;
        color: white;
        padding: 0px 3px;
        border-radius: 3px;
        font-size: 12px;
        display: inline-block;
    }
    .user-info {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
        font-size: 12px;
    }
    .user-info p{
      color: #000;
    }
    .query-subject{
      color: #000;
      font-size: 12px;
    }
    .query-message {
        background: #e0e0e0;
        padding: 8px;
        border-radius: 4px;
        font-size: 12px;
        color: #000;
    }
    @media (max-width: 480px) {
        .user-info {
            flex-direction: column;
        }
        .user-info p {
            min-width: auto;
        }
        .query-box{
          width: 80%;
          margin-bottom: 50px;
        }
    }

    </style>
  </head>
  <body>
    <nav id="sidebar">
      <ul>
        <li>
          <span class="logo">Product Admin</span>
          <button onclick="toggleSidebar()" id="toggle-btn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e8eaed"
            >
              <path
                d="m313-480 155 156q11 11 11.5 27.5T468-268q-11 11-28 11t-28-11L228-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T468-692q11 11 11 28t-11 28L313-480Zm264 0 155 156q11 11 11.5 27.5T732-268q-11 11-28 11t-28-11L492-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T732-692q11 11 11 28t-11 28L577-480Z"
              />
            </svg>
          </button>
        </li>
        <li class="active">
          <a href="javascript:void(0)" onclick="showPage('dashboard')">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e8eaed"
            >
              <path
                d="M520-640v-160q0-17 11.5-28.5T560-840h240q17 0 28.5 11.5T840-800v160q0 17-11.5 28.5T800-600H560q-17 0-28.5-11.5T520-640ZM120-480v-320q0-17 11.5-28.5T160-840h240q17 0 28.5 11.5T440-800v320q0 17-11.5 28.5T400-440H160q-17 0-28.5-11.5T120-480Zm400 320v-320q0-17 11.5-28.5T560-520h240q17 0 28.5 11.5T840-480v320q0 17-11.5 28.5T800-120H560q-17 0-28.5-11.5T520-160Zm-400 0v-160q0-17 11.5-28.5T160-360h240q17 0 28.5 11.5T440-320v160q0 17-11.5 28.5T400-120H160q-17 0-28.5-11.5T120-160Zm80-360h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"
              />
            </svg>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="javascript:void(0)" onclick="showPage('order-list')">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#5f6368"
            >
              <path
                d="M280-600v-80h560v80H280Zm0 160v-80h560v80H280Zm0 160v-80h560v80H280ZM160-600q-17 0-28.5-11.5T120-640q0-17 11.5-28.5T160-680q17 0 28.5 11.5T200-640q0 17-11.5 28.5T160-600Zm0 160q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520q17 0 28.5 11.5T200-480q0 17-11.5 28.5T160-440Zm0 160q-17 0-28.5-11.5T120-320q0-17 11.5-28.5T160-360q17 0 28.5 11.5T200-320q0 17-11.5 28.5T160-280Z"
              />
            </svg>
            <span>Order-list</span>
          </a>
        </li>
        <li>
          <a href="javascript:void(0)" onclick="showPage('product')">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#5f6368"
            >
              <path
                d="M280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM246-720l96 200h280l110-200H246Zm-38-80h590q23 0 35 20.5t1 41.5L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68-39.5t-2-78.5l54-98-144-304H40v-80h130l38 80Zm134 280h280-280Z"
              />
            </svg>
            <span>Product</span>
          </a>
        </li>
        <li>
          <button onclick="toggleSubMenu(this)" class="dropdown-btn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#5f6368"
            >
              <path
                d="M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"
              />
            </svg>
            <span>Report</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e8eaed"
            >
              <path
                d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"
              />
            </svg>
          </button>
          <ul class="sub-menu">
            <div>
              <li>
                <a href="javascript:void(0)" onclick="showPage('dailyReport')"
                  >Daily Report</a
                >
              </li>
              <li>
                <a href="javascript:void(0)" onclick="showPage('weeklyReport')"
                  >Weekly Report</a
                >
              </li>
              <li>
                <a href="javascript:void(0)" onclick="showPage('yearlyReport')"
                  >Yearly Report</a
                >
              </li>
            </div>
          </ul>
        </li>
        <li>
          <a href="javascript:void(0)" onclick="showPage('query')">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368">
              <path d="M478-240q21 0 35.5-14.5T528-290q0-21-14.5-35.5T478-340q-21 0-35.5 14.5T428-290q0 21 14.5 35.5T478-240Zm-36-154h74q0-33 7.5-52t42.5-52q26-26 41-49.5t15-56.5q0-56-41-86t-97-30q-57 0-92.5 30T342-618l66 26q5-18 22.5-39t53.5-21q32 0 48 17.5t16 38.5q0 20-12 37.5T506-526q-44 39-54 59t-10 73Zm38 314q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
            
            <span>Query</span>
          </a>
        </li>
        <li>
          <a href="javascript:void(0)" onclick="showPage('account')">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e8eaed"
            >
              <path
                d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-240v-32q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v32q0 33-23.5 56.5T720-160H240q-33 0-56.5-23.5T160-240Zm80 0h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Z"
              />
            </svg>
            
            <span>Account</span>
          </a>
        </li>
        <li>
          <a href="/admin/logout" class="custom-logout-btn">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"/></svg>
            <span>Logout</span>
          </a>
        </li>
      </ul>
    </nav>

    <div id="main-content">
      <!-- Dashboard Order-list page============================================================================== -->
      <div id="dashboard" class="page-content">
        <div class="dashboard-container">
          <% if (orders.length > 0) { %>
          <div class="dashboard-block">
            <div class="dashboard-value"><%=itemsold  || "0"%></div>
            <div class="dashboard-text">Unit Sold</div>
          </div>
          <div class="dashboard-block">
            <div class="dashboard-value">₹<%=totalprice  || "NA"%></div>
            <div class="dashboard-text">Total Sales</div>
          </div>
          <div class="dashboard-block">
            <div class="dashboard-value"><%=orders.length || "NA" %></div>
            <div class="dashboard-text">Total Orders</div>
          </div>
          <div class="dashboard-block">
            <div class="dashboard-value"><%=activeorderscount || "0" %></div>
            <div class="dashboard-text">Active Listings</div>
          </div>
          <div class="dashboard-block">
            <div class="dashboard-value"><%=totalCustomers || "0" %></div>
            <div class="dashboard-text">Total Customer</div>
          </div>
          <% } else { %>
            <div class="dashboard-block">
              <div class="dashboard-value">0</div>
              <div class="dashboard-text">Unit Sold</div>
            </div>
            <div class="dashboard-block">
              <div class="dashboard-value">₹0</div>
              <div class="dashboard-text">Sales</div>
            </div>
            <div class="dashboard-block">
              <div class="dashboard-value">0</div>
              <div class="dashboard-text">New Orders</div>
            </div>
            <div class="dashboard-block">
              <div class="dashboard-value">0</div>
              <div class="dashboard-text">Active Listings</div>
            </div>
            <div class="dashboard-block">
              <div class="dashboard-value">0</div>
              <div class="dashboard-text">Active Listings</div>
            </div>
            <%}%>

        </div>
      </div>

      <!-- Order-list page -->
      <div id="order-list" class="page-content" style="display: none">
        <div class="order-container">
        <div class="col-xs-12 tm-block-col" id="order-box">
          <div
            class="tm-bg-primary-dark tm-block tm-block-taller tm-block-scroll"
          >
            <h2 class="tm-block-title">Orders List</h2>
            <table class="table">
              <thead>
                <tr style="background-color: #007bff; color: #ffffff">
                  <th scope="col">ORDER NO.</th>
                  <th scope="col">CUSTOMER NAME</th>
                  <th scope="col">STATUS</th>
                  <th scope="col">OPERATORS</th>
                  <th scope="col">ORDER TIME</th>
                  <th scope="col">DELIVERD TIME</th>
                  <th scope="col">INVOICE</th>
                </tr>
              </thead>
              <tbody style="background-color: #2c2f3d;">
                <% if (orders.length > 0) { %>
                  <% orders.reverse().forEach(order => { %>
                    <tr>
                      <th scope="row"><b>#<%= order.orderid %></b></th>
                      <td>
                        <div></div>
                        <%= order.User? order.User.name : 'Loading..' %>
                      </td>
                      <td>
                        <div class="tm-status-circle <%= order.status.toLowerCase() %>"></div>
                        <%= order.status %>
                      </td>
                      <td><b><%= order.DeliveryBoy ? order.DeliveryBoy.name : 'Unassigned' %></b></td> 
                      <td>
                        <%= new Date(order.Date).toLocaleString('en-US', {
                          year: 'numeric',
                          month: 'short',
                          day: '2-digit',
                          hour: '2-digit',
                          minute: '2-digit',
                          hour12: true,
                          timeZone: 'Asia/Kolkata' // Replace with your desired time zone
                        }) %>
                      </td>
                      <td><%= order.DeliveredDate ? 
                            new Date(order.DeliveredDate).toLocaleString('en-US', {
                              year: 'numeric',
                              month: 'short',
                              day: '2-digit',
                              hour: '2-digit',
                              minute: '2-digit',
                              hour12: true
                            }) : 'TBD' %>
                      </td>
                      <td>
                        <button class="print-btn" data-id="<%=order._id%>">Print</button>
                      </td>
                    </tr>
                  <% }) %>
                <% } else { %>
                  <tr>
                    <td colspan="7" style="text-align: center;">No Orders Found</td>
                  </tr>
                <% } %>
              </tbody>
            </table>
            
          </div>
        </div>

        <div class="invoice-page" id="invoice-page" style="display: none;">
          <!-- Back Button -->
          <div class="back-container">
            <button id="back-to-orderlist" class="back-to-orderlist">&larr;</button>
          </div>
        
          <!-- Invoice Container -->
          <div class="invoice-container">
            <div class="top-details">
              <p class="COD"><strong>COD Collect Amount : </strong><span class="cod-amount"></span></p>
              <div class="address-qr-section">
                <div class="delivery-address">
                  <p class="address-box">
                    <strong>Delivery Address :</strong><br>
                    <span class="customer-address"></span>
                  </p>
                </div>
                <div class="qr-code">
                  <img src="../images/assest/qr-code.jpg" alt="QR Code" />
                </div>
              </div>
            </div>
        
            <!-- Courier Section -->
            <div class="courier-details">
              <div class="courier-row">
                <p><strong>Courier Name: </strong><span class="Courier-name"></span> </p>
                <p><strong>HBD: </strong> 25-01</p>
              </div>
              <div class="courier-row">
                <p><strong>Courier AWB:</strong><span class="courier-AWB">FMPC2494299924</span></p>
                <p><strong>CPD:</strong> 29-01</p>
              </div>
            </div>
            <div class="soldby">
              <p><strong>Sold by : </strong>Vegiefy Organics Farming ,Gondia ,441601</p>
            </div>
            <div class="gstin">
              <p><strong>GSTIN No : </strong><span class="gstin-no"> 08BZ76876878H</span></p>
            </div>
            <!-- Product and Order Section -->
            <div class="product-details">
              <table class="product-table">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Qty (KG)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Onion</td>
                    <td>5</td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td>Total</td>
                    <td>5</td>
                  </tr>
                </tfoot>
              </table>
            </div>
            
            <div class="ids">
              <p><strong>Tracking ID: </strong><span class="trackig-id"> FMPC2494299924</span></p>
              <img src="../images/assest/barcode.jpg" alt="Barcode" />
              <p><strong>Order ID: </strong><span class="order-id"></span></p>
              
            </div>

            <div class="ordered">
              <p>Ordered Through</p>
              <img src="../images/assest/vegiefy-logo.png" class="our-logo" alt="">
            </div>
          </div>
        </div>
        
      </div>
      </div>

      <!--product page============================================ -->
      <div id="product" class="page-content" style="display: none">
        <div class="product-container">
          <!-- Left Block -->
          <div class="product-left-block" id="left-block">
            <div class="product-btns">
            <button class="add-product-btn" id="add-product-btn">Add New Product</button>
            <button class="delete-selected-btn">Delete Selected Product</button>
          </div>
         <hr>
            <div class="product-left" >
              <table class="custom-table">
                <thead>
                    <tr>
                        <th>&nbsp;</th>
                        <th>PRODUCT NAME</th>
                        <th>UNIT SOLD</th>
                        <th>IN STOCK</th>
                        <th>EXPIRE DATE</th>
                        <th>Status</th>
                        <th>&nbsp;</th>
                    </tr>
                </thead>
                <tbody style="background-color: #2c2f3d">
                  <% if(products.length>0){ %>
                    <% products.forEach(product => { %>
                        <tr>
                            <td><input type="checkbox" /></td>
                            <td><%= product.name %></td>
                            <td> 
                                <%= product.unitsold || 'N/A' %> 
                            </td>
                            <td contenteditable="true"><%= product.instock %></td>
                            <td>
                                <%= product.expirydate ? new Date(product.expirydate).toDateString() : 'No Expiry' %>
                            </td>
                            <td>
                              <button class="toggle-button" 
                                      data-product-id="<%= product._id %>" 
                                      data-active="<%= product.isActive %>" 
                                      style="background-color: <%= product.isActive ? 'green' : 'grey' %>; color: white; padding: 5px 10px; border: none; border-radius: 5px; cursor: pointer;">
                                <%= product.isActive ? 'Active' : 'Inactive' %>
                              </button>
                            </td>
                            
                            <!-- <td class="delete-icon">
                                <i class="far fa-trash-alt" data-id="<%= product._id %>"></i>
                            </td> -->
                            <td class="box-update-btn"   data-id="<%= product._id %>">
                               <button >Update</button>
                            </td>
                        </tr>
                    <% }); } else{ %>
                      <tr>
                          <td colspan="6">No products found</td>
                      </tr>
                    <% } %>
                </tbody>
            </table>
            
            </div>
         
          </div>
          
          <!-- Right Block -->
          <div class="product-right-block" id="right-block">
            <button class="add-category-btn" id="add-category-btn">Add New Category</button>
            <hr>
            <h2>Product Categories</h2>
            <div class="product-right">
              <table class="category-table">
                <tbody>
                  <!-- Sample Categories -->
                  <% if(category.length > 0) { %>
                    <% category.forEach((category) => { %>
                        <tr>
                            <td><%= category.name %></td>
                            <td class="delete-icon-btn" data-id="<%= category._id %>">
                                <i class="far fa-trash-alt"></i>
                            </td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="2">No categories found</td>
                    </tr>
                <% } %>
                
                
                  <!-- Add more rows as needed -->
                </tbody>
              </table>
            </div>
           
          </div>
   <!-- Form Block -->
<div id="add-product-form" style="display: none;">
  <h2 class="form-heading">
    <!-- Back Icon -->
    <i id="back-icon" class="fas fa-arrow-left back-icon"></i>
    Add Product
  </h2>
  <form class="form-container" action="/admin/addproduct" method="post" enctype="multipart/form-data">
    <div class="left-form-block">
      <!-- Left Side Block -->
      <div class="form-group-account">
        <label for="product-name">Product Name:</label>
        <input type="text" id="product-name" name="productname" required />
      </div>
      <div class="form-group-account">
        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="3" required></textarea>
      </div>
      <div class="form-group-account">
        <label for="description">Description 2:</label>
        <textarea id="description" name="description2" rows="3" required></textarea>
      </div>
      <div class="form-group-account">
        <label for="category">Category:</label>
        <select id="category" name="category" required>
          <option value="" selected>Select Category</option>
          <% if(category.length>0){ %>
            <% category.forEach((category)=>{ %>
          <option value="<%= category._id %>"><%= category.name %></option>
          <% }); } else{ %>
            <option value="" selected>No categories found</option>
          <% } %>
      
        </select>
      </div>
      <div class="form-group-account">
        <label for="quantity-selecter">Select product quantity:</label>
        <select name="quantityselector" id="quantityselector">
          <option value="" selected>Select Quantity</option>
          <option value="Kg">Kg</option>
          <option value="Pc">Pc</option>
        </select>
      </div>
      <div class="form-row">
        <div class="form-group-account">
          <label for="expire-date">Expire Date:</label>
          <input type="date" id="expire-date" name="expiredate" required />
        </div>
        <!-- <div class="form-group-account">
          <label for="in-stock">Price(₹):</label>
          <input type="number" id="in-stock" name="price" required />
        </div> -->
        <div class="form-group-account">
          <label for="in-stock">Units in Stock:</label>
          <input type="number" id="in-stock" name="instock" required />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group-account">
          <label for="in-stock">Price(₹):</label>
          <input type="number" id="in-stock" name="price" required />
        </div>
        </div>
    </div>

    <!-- Right Side Block -->
    <div class="right-form-block">
      <div class="tm-product-img-dummy mx-auto">
        <i
          class="fas fa-cloud-upload-alt tm-upload-icon"
          onclick="document.getElementById('fileInput').click();"
        ></i>
      </div>
      <div class="custom-file mt-3 mb-3">
        <input id="fileInput" type="file" name="file" style="display:none;" />
        <input
          type="button"
          class="btn btn-primary btn-block mx-auto"
          value="UPLOAD PRODUCT IMAGE"
          onclick="document.getElementById('fileInput').click();"
        />
      </div>
    </div>

    <!-- Add Product Now Button (inside the form block) -->
    <div class="form-actions">
      <button type="submit" class="btn btn-success">Add Product Now</button>
    </div>
  </form>
</div>

<!-- update form -->
<div id="update-product-form" style="display: none;">
  <h2 class="form-heading">
    <!-- Back Icon -->
    <i id="back-icon" class="fas fa-arrow-left back-icon"></i>
    Update Product
  </h2>
  <form class="form-container" action="/admin/updateproduct" method="post" enctype="multipart/form-data">
    <input type="hidden" name="productid" id="productid" value="" />
    <div class="left-form-block">
      <!-- Left Side Block -->
      <div class="form-group-account">
        <label for="product-name">Product Name:</label>
        <input type="text" id="updateproductname" name="productname" required />
      </div>
      <div class="form-group-account">
        <label for="description">Description:</label>
        <textarea id="updatedescription" name="productdescription" rows="3" required></textarea>
      </div>
      <div class="form-group-account">
        <label for="description2">Description 2:</label>
        <textarea id="updatedescription2" name="productdescription2" rows="3" required></textarea>
      </div>
      <div class="form-group-account">
        <label for="category">Category:</label>
        <select id="updatecategory" name="praductcategory" required>
          <option value="" selected>Select Category</option>
          <option value="new-arrival">New Arrival</option>
          <option value="most-popular">Most Popular</option>
          <option value="trending">Trending</option>
        </select>
      </div>
      <div class="form-row">
        <div class="form-group-account">
          <label for="expire-date">Expire Date:</label>
          <input type="date" id="updateexpiredate" name="productexpiredate" required />
        </div>
        
        <div class="form-group-account">
          <label for="in-stock">Units in Stock:</label>
          <input type="number" id="updateinstock" name="productinstock" required />
        </div>
      </div>
      
    </div>

    <!-- Right Side Block -->
    <div class="right-form-block">
      <!-- Product Image Preview -->
      <div class="tm-product-img-dummy mx-auto">
        <img
          id="updateproductimage-preview"
          src=""
          alt="Product Image"
          style="width: 150px; height: 150px; object-fit: cover; display: none;"
        />
        <i
          class="fas fa-cloud-upload-alt tm-upload-icon"
          onclick="document.getElementById('updateproductimage').click();"
        ></i>
      </div>
      
      <!-- File Input and Upload Button -->
      <div class="custom-file mt-3 mb-3">
        <input
          id="updateproductimage"
          type="file"
          name="productimage"
          style="display: none;"
          accept="image/*"
          onchange="previewUploadedProductImage()"
        />
        <input
          type="button"
          class="btn btn-primary btn-block mx-auto"
          value="UPLOAD PRODUCT IMAGE"
          onclick="document.getElementById('updateproductimage').click();"
        />
      </div>
    </div>

    <!-- Add Product Now Button (inside the form block) -->
    <div class="form-actions">
      <button type="submit" class="btn btn-success">Update Product Now</button>
    </div>
  </form>
</div>

<!-- Add Category form ========================================================== -->
<div class="category-form" id="add-category-form" style="display: none;">
  <div class="category-container">
    <div class="icon-container">
      <i id="back-icon" class="fas fa-arrow-left back-icon"></i>
    </div>
    <div class="form-content">
      <label for="category-name">Category Name:</label>
      <input type="text" id="category-name" name="category-name" required />
      <button>Add</button>
    </div>
  </div>
</div>

        </div>
      </div>

      <!--  report page============================================================================================ -->
      <div id="dailyReport" class="page-content" style="display: none">
        <h1>This is Daily Report page</h1>
      </div>
      <div id="weeklyReport" class="page-content" style="display: none">
        <h1>This is Weekly Report page</h1>
      </div>
      <div id="yearlyReport" class="page-content" style="display: none">
        <h1>This is Yearly Report page</h1>
      </div>

      <!-- Query page=============================================================================================== -->
      <div id="query" class="page-content" style="display: none;">
        <div class="query-box">
            <h1 class="query-heading">User Query</h1>
            <% if(queries.length>0){ %>
             <% queries.forEach((query,index)=>{ %>
            <div class="query-container">
                <h2 class="query-title">Query <%=index+1%></h2>
                <div class="user-info">
                  <p><strong>User Name:</strong><span class="user-name"><%=query.name%></span> </p>
                  <!-- <p><strong>User Mobile:</strong> <span class="user-num">9123456789</span></p> -->
                  <p><strong>User Email:</strong> <span class="user-email"><%=query.email%></span></p>
                </div>
                <p class="query-subject"><strong>Query Subject:</strong> <span class="query-sub"><%=query.subject%></span></p>
                <div class="query-message"><strong>Query message:</strong><p class="query-msg"><%=query.message%></p></div>
            </div>
            <% }) %>
            <% }else{ %>
            <p>No queries found.</p>
            <% } %>
            
          

        </div>
    </div>
      <!-- Account page================================================================================================ -->
      <div id="account" class="page-content" style="display: none">
        <div class="container-block" id="container-block">
          <button class="add-account-btn" id="add-account-btn">Add New Account</button>
          <% if(deliveryBoys.length>0){ deliveryBoys.forEach((user,index)=>{ %>
          <div class="account-form">
            <h4>#<%=index+1%></h4>

            <div class="image-column-left">
              <div class="avatar-container">
                <img class="avatar-image" src="data:<%= user.profileimage.imageType %>;base64,<%= user.profileimage.file.toString('base64') %>" alt="Avatar" />
              </div>
          </div>

            
            <div class="form-column-right">
              <form action="/admin/update-deliveryboy/<%=user._id%>" method="get" class="form-details">
                <!-- First Row -->
                <div class="form-group-details">
                  <label for="">User ID:</label>
                   <input type="text" placeholder="Enter your ID" value="<%=user.username%>" name="username" class="input-field">
                </div>
                <div class="form-group-details">
                  <label for="">Name:</label>
                  <input type="text" placeholder="Enter your Name" name="name" value="<%=user.name%>" class="input-field">
                </div>
                <!-- Second Row -->
                <div class="form-group-details">
                  <label for="">Mobile No.</label>
                  <input type="text" placeholder="Enter your Mobile No." name="mobile" value="<%=user.mobile%>" class="input-field">
                </div>
                <div class="form-group-details">
                  <label for="">Email id:</label>
                  <input type="email" placeholder="Enter your Email ID" name="email" value="<%=user.email%>" class="input-field">
                </div>
                <!-- Third Row -->
                <div class="form-group-details">
                  <label for="">Password:</label>
                  <input type="text" placeholder="Enter your Password" name="password" value="<%=user.password%>" class="input-field">
                </div>
                <div class="form-group-details">
                  <label for="">Joining Date:</label>
                  <input type="date"  placeholder="Enter your Joining Date" name="joiningDate" value="<%= user.joiningDate.toISOString().split('T')[0] %>" class="input-field">
                </div>
                
              </form>
            
            <div class="action-buttons">
              <button id="update-btn" class="update-btn" data-id="<%=user._id%>" type="submit">Update</button>
              <a href="/admin/delete-deliveryboy/<%=user._id%>"><button id="delete-btn" class="delete-btn">Delete</button></a>
            </div>
            </div>
          </div>
          <hr>
          <% })}else{%>
            <h3>No Delivery Boys added yet.</h3>
          <%}%>
        </div>



        <!-- Main-ACCOUNT-Form for add-new-account===================================================================================== -->
        <div class="main-form" id="main-form" style="display: none;">
          <i id="back-to-main" class="fas fa-arrow-left back-to-main"></i>
          <div class="container">
            <!-- Block 1: List of Accounts -->
            <div class="block block-dark">
              <h2 class="block-title">Account</h2>
              <p>Account Role</p>
              <select class="custom-select-wide">
                <option value="0">Select role</option>
                <option value="1">Delivery Boy</option>
              </select>
            </div>
            <!-- Form starts here -->
            <form action="/admin/create-deliveryboy" class="form" method="post" enctype="multipart/form-data">
              
        
              <!-- Row for Avatar and Account Settings -->
              <div class="account-row">
                <!-- Block 2: Change Avatar -->
                <div class="block-column-left">
                  <h2 class="block-title">Profile</h2>
                  <div class="avatar-container">
                    <img
                      class="avatar-image"
                      src="assest/new-page/p-4.jpg"
                      alt="Avatar"
                    />
                    <a href="#" class="avatar-delete-icon">
                      <i class="far fa-trash-alt"></i>
                    </a>
                  </div>
                  <input type="file" name="profile" id="uploadBtn" />
                  <label for="uploadBtn" class="button-upload">Upload Image</label>
                </div>
        
                <!-- Block 3: Account Settings -->
                <div class="block-column-right">
                  <h2 class="block-title">Account Settings</h2>
                  <!-- First Row -->
                  <div class="form-group">
                    <label for="account-name">Name</label>
                    <input
                      id="account-name"
                      name="name"
                      type="text"
                      class="form-control"
                    />
                  </div>
                  <div class="form-group">
                    <label for="user-name">Username</label>
                    <input
                      id="account-name"
                      name="username"
                      type="text"
                      class="form-control"
                    />
                  </div>
                  <div class="form-group">
                    <label for="account-email">Email</label>
                    <input
                      id="account-email"
                      name="email"
                      type="email"
                      class="form-control"
                    />
                  </div>
                  <!-- Second Row -->
                  <div class="form-group">
                    <label for="password">Password</label>
                    <input
                      id="password"
                      name="password"
                      type="password"
                      class="form-control"
                    />
                  </div>
                  <div class="form-group">
                    <label for="password2">Re-enter Password</label>
                    <input
                      id="password2"
                      name="password2"
                      type="password"
                      class="form-control"
                    />
                  </div>
                  <!-- Third Row -->
                  <div class="form-group">
                    <label for="phone">Phone</label>
                    <input
                      id="phone"
                      name="phone"
                      type="tel"
                      class="form-control"
                    />
                  </div>
        
                  <div class="form-group">
                    <label for="joining-date">Joining Date:</label>
                    <input
                      type="date"
                      id="joining-date"
                      name="joindate"
                      placeholder="Enter your Joining Date"
                      class="form-control"
                    />
                    </div>
                  <!-- Fifth Row -->
                  <div class="form-group">
                    <button type="submit" class="btn-danger">
                      Add Your Account
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
        <!-- Main-ACCOUNT-Form for update-button===================================================================================== -->
        <div class="update-form" id="update-form" style="display: none;">
          <i id="back-main" class="fas fa-arrow-left back-to-main"></i>
          <div class="update-container">
            <!-- Block 1: List of Accounts -->
            <div class="block update-block-dark">
              <h2 class="block-title">Account</h2>
              <p>Account Role</p>
              <select class="update-custom-select-wide">
                <option value="0">Select role</option>
                <option value="1">Delivery Boy</option>
              </select>
            </div>
            <!-- Form starts here -->
            <form action="" class="form">
              
        
              <!-- Row for Avatar and Account Settings -->
              <div class="update-account-row">
                <!-- Block 2: Change Avatar -->
                <div class="update-block-column-left">
                  <h2 class="block-title">Profile</h2>
                  <div class="update-avatar-container">
                    <img
                      class="avatar-image"
                      src="assest/new-page/p-4.jpg"
                      alt="Avatar"
                    />
                    <a href="#" class="avatar-delete-icon">
                      <i class="far fa-trash-alt"></i>
                    </a>
                  </div>
                  <input type="file" name="profile" id="uploadBtn" />
                  <label for="uploadBtn" class="update-button-upload">Upload Image</label>
                </div>
        
                <!-- Block 3: Account Settings -->
                <div class="update-block-column-right">
                  <h2 class="block-title">Account Settings</h2>
                  <!-- First Row -->
                  <div class="update-form-group">
                    <label for="account-name">Name</label>
                    <input
                      id="account-name"
                      name="updatename"
                      type="text"
                      class="form-control"
                    />
                  </div>
                  <div class="update-form-group">
                    <label for="account-email">Email</label>
                    <input
                      id="account-email"
                      name="updateemail"
                      type="email"
                      class="form-control"
                    />
                  </div>
                  <!-- Second Row -->
                  <div class="update-form-group">
                    <label for="password">Password</label>
                    <input
                      id="password"
                      name="updatepassword"
                      type="password"
                      class="form-control"
                    />
                  </div>
                  <div class="update-form-group">
                    <label for="updatepassword2">Re-enter Password</label>
                    <input
                      id="password2"
                      name="password2"
                      type="password"
                      class="form-control"
                    />
                  </div>
                  <!-- Third Row -->
                  <div class="update-form-group">
                    <label for="phone">Phone</label>
                    <input
                      id="phone"
                      name="updatephone"
                      type="tel"
                      class="form-control"
                    />
                  </div>
        
                  <div class="update-form-group">
                    <label for="joining-date">Joining Date:</label>
                    <input
                      type="date"
                      id="joining-date"
                      name="updatejoiningdate"
                      placeholder="Enter your Joining Date"
                      class="form-control"
                    />
                  </div>
            
                <!-- Fifth Row -->
                <div class="update-form-group">
                  <button type="submit" class="update-btn-danger">
                    Update Your Account
                  </button>
                </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      const toggleButton = document.getElementById("toggle-btn");
      const sidebar = document.getElementById("sidebar");

      function toggleSidebar() {
        sidebar.classList.toggle("close");
        toggleButton.classList.toggle("rotate");

        closeAllSubMenus();
      }

      function toggleSubMenu(button) {
        if (!button.nextElementSibling.classList.contains("show")) {
          closeAllSubMenus();
        }

        button.nextElementSibling.classList.toggle("show");
        button.classList.toggle("rotate");

        if (sidebar.classList.contains("close")) {
          sidebar.classList.toggle("close");
          toggleButton.classList.toggle("rotate");
        }
      }

      function closeAllSubMenus() {
        Array.from(sidebar.getElementsByClassName("show")).forEach((ul) => {
          ul.classList.remove("show");
          ul.previousElementSibling.classList.remove("rotate");
        });
      }

      // ====================
      // Function to toggle page content visibility and set the active class
      function showPage(pageId) {
        // Hide all pages
        let pages = document.querySelectorAll(".page-content");
        pages.forEach((page) => (page.style.display = "none"));

        // Show the selected page
        let selectedPage = document.getElementById(pageId);
        if (selectedPage) {
          selectedPage.style.display = "block";
        }

        // Remove the active class from all menu items
        let menuItems = document.querySelectorAll("#sidebar ul li");
        menuItems.forEach((item) => item.classList.remove("active"));

        // Add the active class to the clicked menu item
        let clickedMenuItem = document.querySelector(
          `[onclick="showPage('${pageId}')"]`
        ).parentElement;
        if (clickedMenuItem) {
          clickedMenuItem.classList.add("active");
        }
      }
  // js for product page
  const addProductBtn = document.getElementById('add-product-btn');
  
  const addProductForm = document.getElementById('add-product-form');
  const backIcons = document.querySelectorAll('.back-icon');
  const addCategoryBtn = document.getElementById('add-category-btn');
  const addCategoryForm = document.getElementById('add-category-form');

  
// Show the category form and hide the blocks
addCategoryBtn.addEventListener('click', () => {
    leftBlock.style.display = 'none';
    rightBlock.style.display = 'none';
    addCategoryForm.style.display = 'block';
  });

  // back icon to hide category form
  backIcons.forEach((icon) => {
  icon.addEventListener('click', () => {
    // Example: Show or hide specific blocks
    leftBlock.style.display = 'block';
    rightBlock.style.display = 'block';
    addCategoryForm.style.display = 'none';
  });
});
// Show the form and hide the blocks
addProductBtn.addEventListener('click', () => {
  leftBlock.style.display = 'none';
  rightBlock.style.display = 'none';
  addProductForm.style.display = 'block';
});

backIcons.forEach((icon) => {
icon.addEventListener('click', () => {
  // Example: Show or hide specific blocks
  leftBlock.style.display = 'block';
  rightBlock.style.display = 'block';
  addProductForm.style.display = 'none';
});
});
const boxUpdateBtns = document.querySelectorAll('.box-update-btn');
const updateProductForm = document.getElementById('update-product-form');
const leftBlock = document.getElementById('left-block'); // Ensure these IDs are correct
const rightBlock = document.getElementById('right-block');

boxUpdateBtns.forEach(boxUpdateBtn => {
  boxUpdateBtn.addEventListener('click', async () => {
    // Hide the left and right blocks, show the update form
    leftBlock.style.display = 'none';
    rightBlock.style.display = 'none';
    updateProductForm.style.display = 'block';

    // Fetch the item ID from the data-id attribute
    const itemId = boxUpdateBtn.getAttribute('data-id');

    try {
      // Fetch product details from the server
      const response = await fetch(`/admin/getproduct/${itemId}`);
      if (response.ok) {
        const itemData = await response.json();

        // Populate the update form with fetched data
        document.querySelector('#updateproductname').value = itemData.name || '';
        document.querySelector('#updatedescription').value = itemData.description || '';
        document.querySelector('#updatedescription2').value = itemData.description2 || '';
        document.querySelector('#updatecategory').value = itemData.category || '';
        document.querySelector('#productid').value = itemData._id || '';

        if (itemData.expirydate) {
          const formattedDate = new Date(itemData.expirydate).toISOString().split('T')[0];
          document.querySelector('#updateexpiredate').value = formattedDate;
        }

        document.querySelector('#updateinstock').value = itemData.instock || '';

        const productImagePreview = document.querySelector('#updateproductimage-preview');
        // if (itemData.image) {
        //   const base64Image = `data:${itemData.image.imageType};base64,${btoa(
        //     String.fromCharCode(...new Uint8Array(itemData.image.file.data))
        //   )}`;
        //   productImagePreview.src = base64Image;
        //   productImagePreview.style.display = 'block';
        // } else {
        //   productImagePreview.style.display = 'none';
        // }

        console.log('Item details loaded:', itemData);
      } else {
        alert('Failed to load item details.');
      }
    } catch (error) {
      console.error('Error fetching item details:', error);
    }
  });
});


backIcons.forEach((icon) => {
icon.addEventListener('click', () => {
  // Example: Show or hide specific blocks
  leftBlock.style.display = 'block';
  rightBlock.style.display = 'block';
  updateProductForm.style.display = 'none';
});
});
  // for edit number
const editableCells = document.querySelectorAll('td[contenteditable="true"]');

editableCells.forEach((cell) => {
  cell.addEventListener('blur', () => {
    console.log(`Updated value: ${cell.textContent}`);
    // Add logic to save or process the updated value
  });
});
      // js for account page

      document.addEventListener('DOMContentLoaded', () => {
  
  const containerBlock = document.getElementById('container-block');
  const mainForm = document.getElementById('main-form');
  const updateForm = document.getElementById('update-form');
  const deleteForm = document.getElementById('delete-form');

  const backToMain = document.getElementById('back-to-main'); // Back button for add-account
  const backMain = document.getElementById('back-main'); // Back button for update form
  const mainBack = document.getElementById('main-back'); // Back button for delete form

  // For handling add account button
  const addAccountBtn = document.getElementById('add-account-btn');
  addAccountBtn.addEventListener('click', () => {
    containerBlock.style.display = 'none';
    mainForm.style.display = 'block';
  });

  // For handling update account buttons
  const updateButtons = document.querySelectorAll('.update-btn');
  updateButtons.forEach((btn) => {
    btn.addEventListener('click', async() => {
      // Fetch the user ID from the data-id attribute
      const userId = btn.getAttribute("data-id");

      try {
        // Fetch user details from the server
        const response = await fetch(`/admin/getuser/${userId}`);
        if (response.ok) {
          const userData = await response.json();
      
          // Populate the update form with fetched data
          document.querySelector('[name="updatename"]').value = userData.name || "";
document.querySelector('[name="updateemail"]').value = userData.email || "";
document.querySelector('[name="updatepassword"]').value = userData.password || "";
document.querySelector('[name="updatephone"]').value = userData.mobile || "";
document.querySelector('[name="updatepassword2"]').value = userData.password || "";
document.querySelector('[name="updateaccountid"]').value = userData._id || "";
          console.log("User details loaded:", userData);
        } else {
          alert("Failed to load user details.");
        }
      } catch (error) {
        console.error("Error fetching user details:", error);
      }

      // Show the update form and hide the main container
      containerBlock.style.display = 'none';
      updateForm.style.display = 'block';

    });
  });

  // For handling delete account buttons
 

  // Back to main container (for add-account form)
  if (backToMain) {
    backToMain.addEventListener('click', () => {
      containerBlock.style.display = 'block';
      mainForm.style.display = 'none';
    });
  }

  // Back to main container (for update form)
  if (backMain) {
    backMain.addEventListener('click', () => {
      containerBlock.style.display = 'block';
      updateForm.style.display = 'none';
    });
  }

  // Back to main container (for delete form)
  if (mainBack) {
    mainBack.addEventListener('click', () => {
      containerBlock.style.display = 'block';
      deleteForm.style.display = 'none';
    });
  }
});
document.addEventListener("DOMContentLoaded", () => {
    const deleteIcons = document.querySelectorAll(".delete-icon i");

    deleteIcons.forEach((icon) => {
      icon.addEventListener("click", async () => {
        const productId = icon.getAttribute("data-id");

        if (confirm("Are you sure you want to delete this product?")) {
          try {
            const response = await fetch(`/admin/products/${productId}`, {
              method: "DELETE",
              headers: {
                "Content-Type": "application/json",
              },
            });

            if (response.ok) {
              alert("Product deleted successfully!");
              icon.closest("tr").remove(); // Remove the row from the table
            } else {
              const errorData = await response.json();
              alert(`Failed to delete product: ${errorData.message}`);
            }
          } catch (error) {
            console.error("Error deleting product:", error);
            alert("An error occurred. Please try again later.");
          }
        }
      });
    });
  });
  function previewUploadedProductImage() {
  const fileInput = document.getElementById('updateproductimage');
  const previewImage = document.getElementById('updateproductimage-preview');

  if (fileInput.files && fileInput.files[0]) {
    const reader = new FileReader();
    reader.onload = function (e) {
      previewImage.src = e.target.result; // Set the preview image source
      previewImage.style.display = 'block'; // Show the image preview
    };
    reader.readAsDataURL(fileInput.files[0]); // Read the file as a DataURL
  } else {
    previewImage.src = '';
    previewImage.style.display = 'none'; // Hide the preview if no file is selected
  }
}

document.querySelector('.delete-selected-btn').addEventListener('click', async () => {
    const selectedIds = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
        .map(checkbox => checkbox.closest('tr').querySelector('.box-update-btn').getAttribute('data-id'));

    try {
        const response = await fetch('/admin/products/delete', {
            method: 'DELETE',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ productIds: selectedIds })
        });
        const data = await response.json();
        if (response.ok) {
            alert('Selected products deleted successfully');
            // Optionally, refresh the page or remove rows from the DOM
            location.reload();
        } else console.error(data.error);
    } catch (err) {
        console.error('Failed to delete products', err);
    }
});

// ==================================================
document.addEventListener("DOMContentLoaded", () => {
    const printButtons = document.querySelectorAll(".print-btn");
    const orderBox = document.getElementById("order-box");
    const invoicePage = document.getElementById("invoice-page");
    const backButton = document.getElementById("back-to-orderlist");

    printButtons.forEach((button) => {
      button.addEventListener("click", async() => {
        // Hide order box
        const orderid=button.getAttribute("data-id");
        try{
          const response = await fetch(`/admin/getorder/${orderid}`,{
            method: "GET",
            headers: {
              "Content-Type": "application/json",
            },
          });
          const orderData =await response.json();
        try {
    if (orderData && orderData.TotalPrice) {
        document.querySelector(".cod-amount").textContent = `Rs. ${orderData.TotalPrice}`;
    } else {
        console.error("TotalPrice is missing in orderData");
        document.querySelector(".cod-amount").textContent = "Rs. --";
    }

    // Update the customer address
    if (orderData && orderData.User && orderData.User.address && orderData.AddressIndex !== undefined) {
        const address = orderData.User.address[orderData.AddressIndex];
        if (address) {
            document.querySelector(".customer-address").innerHTML = `
                ${orderData.User.name}<br>
                ${address.locality} ${address.city}, ${address.state}- 
                <strong>${address.pincode}</strong>, India
            `;
        } else {
            console.error("Address not found at the specified AddressIndex");
            document.querySelector(".customer-address").innerHTML = "Address information is incomplete.";
        }
    } else {
        console.error("User or address data is missing in orderData");
        document.querySelector(".customer-address").innerHTML = "Address information is unavailable.";
    }

    // Update the order ID
    if (orderData && orderData.orderid) {
        document.querySelector(".order-id").textContent = orderData.orderid;
    } else {
        console.error("Order ID is missing in orderData");
        document.querySelector(".order-id").textContent = "--";
    }

    // Update the courier name
    if (orderData && orderData.DeliveryBoy && orderData.DeliveryBoyName) {
        document.querySelector(".Courier-name").textContent = orderData.DeliveryBoyName;
    } else {
        console.error("DeliveryBoy name is missing in orderData");
        document.querySelector(".Courier-name").textContent = "Not assigned";
    }
} catch (error) {
    console.error("An unexpected error occurred:", error);

    // Optionally, provide user-friendly fallback text
    document.querySelector(".cod-amount").textContent = "Rs. --";
    document.querySelector(".customer-address").innerHTML = "Error fetching address.";
    document.querySelector(".order-id").textContent = "--";
    document.querySelector(".Courier-name").textContent = "Not assigned";
}

         
try {
    const productTableBody = document.querySelector(".product-table tbody");

    // Ensure the table body exists
    if (!productTableBody) {
        throw new Error("Table body with selector '.product-table tbody' not found.");
    }

   
    if (!orderData || !Array.isArray(orderData.Products)) {
        throw new Error("Products data is missing or invalid.");
    }

    
    productTableBody.innerHTML = "";

   
    orderData.Products.forEach((product, index) => {
        if (!product || !product.product) {
            console.error(`Product at index ${index} is invalid:`, product);
            return; // Skip this product
        }

        // Create a new row and cells
        const newRow = document.createElement("tr");

        const productCell = document.createElement("td");
        productCell.textContent = product.product.name || "Unknown";

        const quantityCell = document.createElement("td");
        quantityCell.textContent = product.quantity || "0";

        // Append cells to the row
        newRow.appendChild(productCell);
        newRow.appendChild(quantityCell);

        // Append the row to the table body
        productTableBody.appendChild(newRow);
    });

    // Optionally update the total in the <tfoot>
    const totalQuantity = orderData.Products.reduce((sum, product) => {
        return sum + (product.quantity || 0);
    }, 0);

    const productTableFooter = document.querySelector(".product-table tfoot");
    if (productTableFooter) {
        const totalCell = productTableFooter.querySelector("td:nth-child(2)");
        if (totalCell) {
            totalCell.textContent = totalQuantity;
        }
    }
} catch (error) {
    console.error("Error populating product table:", error);
}

         
        }catch(error){
          console.error("Error fetching order details:", error);
        }
        orderBox.style.display = "none";
        // Show invoice page
        invoicePage.style.display = "block";
      });
    });

    backButton.addEventListener("click", () => {
      // Hide invoice page
      invoicePage.style.display = "none";
      // Show order box
      orderBox.style.display = "block";
    });
  });


  // js for toogle button product container
  document.querySelectorAll('.toggle-button').forEach(button => {
    button.addEventListener('click', async function () {
      const productId = this.getAttribute('data-product-id');
      const isActive = this.getAttribute('data-active') === 'true';

      const response = await fetch(`/admin/toggle-product/${productId}`, {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ isActive: !isActive })
      });

      if (response.ok) {
        this.setAttribute('data-active', (!isActive).toString());
        this.textContent = !isActive ? 'Active' : 'Inactive';
        this.style.backgroundColor = !isActive ? 'green' : 'grey';
      }
    });
  });
  // category api send 
  document.addEventListener("DOMContentLoaded", function () {
    const categoryForm = document.getElementById("add-category-form");
    const addCategoryBtn = document.querySelector(".form-content button");
    
    addCategoryBtn.addEventListener("click", async function (event) {
        event.preventDefault();
        
        const categoryName = document.getElementById("category-name").value;
        console.log(categoryName);
        if (!categoryName.trim()) {
            alert("Category name cannot be empty");
            return;
        }

        const categoryData = {
            name: categoryName
        };

        try {
            const response = await fetch("/admin/add-category", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(categoryData)
            });

            const result = await response.json();

            if (response.ok) {
                alert("Category added successfully!");
                document.getElementById("category-name").value = ""; // Clear input field
            } else {
                alert(result.error || "Failed to add category");
            }
        } catch (error) {
            console.error("Error adding category:", error);
            alert("Error adding category");
        }
    });
});
document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".delete-icon-btn").forEach(button => {
            button.addEventListener("click", async function () {
                const categoryId = this.getAttribute("data-id");

                const confirmDelete = confirm("Are you sure you want to delete this category?");
                if (!confirmDelete) return;

                const response = await fetch(`/admin/delete-category/${categoryId}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" }
                });

                const result = await response.json();

                if (result.success) {
                    alert(result.message);
                    window.location.reload(); // Refresh the page
                } else {
                    alert(result.message);
                }
            });
        });
    });

    </script>
  </body>
</html>
